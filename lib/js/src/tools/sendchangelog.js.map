{"version":3,"sources":["../src/tools/sendchangelog.ts"],"names":[],"mappings":";AAGA,MAAY,IAAI,WAAM,MAAM,CAAC,CAAA;AAC7B,sBAA+B,KAAK,CAAC,CAAA;AAMrC,MAAM,WAAW,GAAa,CAAC,oBAAoB,CAAC,CAAC;AAErD,MAAM,WAAW,GAAQ,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACjE,MAAM,cAAc,GAAW,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;AAE3D,MAAM,aAAa,GAAW,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAE7D,sBAAgB,CAAC,aAAa,CAAC,WAAW,EAAE,SAAS,EAAE,UAAU,cAAc,KAAK,EAAE,aAAa,EACjG,6BAA6B,CAAC,CAAC,IAAI,CAAC,CAAC,SAAiB;IACtD,OAAO,CAAC,GAAG,CAAC,4BAA4B,SAAS,EAAE,CAAC,CAAC;AACvD,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK;IACb,OAAO,CAAC,GAAG,CAAC,wBAAwB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AACvD,CAAC,CAAC,CAAC","file":"sendchangelog.js","sourcesContent":["// Copyright 2016 Frank Lin (lin.xiaoe.f@gmail.com). All rights reserved.\n// Use of this source code is governed a license that can be found in the LICENSE file.\n\nimport * as path from 'path';\nimport {BaseEmailService} from 'gcs';\n\n/**\n * 将 CHANGELOG.md 发送给订阅更新邮件的人。\n */\n\nconst toAddresses: string[] = ['back@gagogroup.com'];\n\nconst packageJson: any = require(path.resolve('./package.json'));\nconst currentVersion: string = String(packageJson.version);\n\nconst changelogPath: string = path.resolve('./CHANGELOG.md');\n\nBaseEmailService.sendChangelog(toAddresses, '基础库更新提示', `sakura ${currentVersion} 更新`, changelogPath,\n  '/tmp/sakura-node-ts.version').then((requestId: string) => {\n  console.log(`Send CHANGELOG successes ${requestId}`);\n}).catch((error) => {\n  console.log(`Send CHANGELOG fails ${error.message}`);\n});\n"]}