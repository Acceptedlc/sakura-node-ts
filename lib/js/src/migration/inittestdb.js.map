{"version":3,"sources":["../src/migration/inittestdb.ts"],"names":[],"mappings":";AAEA,yBAAyB;AACzB,2CAAyD;AACzD,mDAA8C;AAG9C;IAAA;QACU,gBAAW,GAAqB,EAAE,CAAC;IA+B7C,CAAC;IA7BC,eAAe;QACb,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,uBAAU,CAAC,SAAS,EAAE,CAAC,IAAI,EAAG,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,6BAAiB,CAAC,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;IACH,CAAC;IACD,QAAQ,CAAC,GAAa;QACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,6BAAiB,CAAC,GAAG,CAAC,CAAC,CAAC;IACpD,CAAC;IAED,OAAO;QACL,IAAI,GAAG,GAAW,EAAE,CAAC;QAErB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACjD,IAAI,SAAS,GAAc,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC/C,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,CAAC;YAEvB,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtC,GAAG,IAAI,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED,IAAI,CAAE,OAAe,yBAAyB;QAC5C,MAAM,GAAG,GAAW,IAAI,CAAC,OAAO,EAAE,CAAC;QACnC,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IAE1B,CAAC;CAEF;AAhCD,gCAgCC","file":"inittestdb.js","sourcesContent":["// Copyright (c) 2016 (jw872505975@gmail.com). All rights reserved.\n\nimport * as fs from 'fs';\nimport {Operation, AddModelOperation} from './operation';\nimport {sqlContext} from '../util/sqlcontext';\n\n\nexport class InitTestDb {\n  private operations_: Array<Operation> = [];\n\n  initAllTableSql(): void {\n    for (let cls of sqlContext.getTables().keys() ) {\n      this.operations_.push(new AddModelOperation(cls));\n    }\n  }\n  addModel(cls: Function): void {\n    this.operations_.push(new AddModelOperation(cls));\n  }\n\n  preview(): string {\n    let sql: string = '';\n\n    for (let i = 0; i < this.operations_.length; i++) {\n      let operation: Operation = this.operations_[i];\n      sql += operation.sql();\n\n      if (i !== this.operations_.length - 1) {\n        sql += '\\n';\n      }\n    }\n    return sql;\n  }\n\n  save (path: string = 'sql/test/initTestDb.sql'): void {\n    const sql: string = this.preview();\n    fs.writeFile(path, sql);\n\n  }\n\n}\n"]}