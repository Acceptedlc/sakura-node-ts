{"version":3,"sources":["../src/middleware/cors.ts"],"names":[],"mappings":";AAWA,sBAA6B,OAAkB,EAAE,OAAkB;IACjE,MAAM,CAAC,CAAC,GAAoB,EAAE,GAAqB,EAAE,IAA0B;QAE7E,GAAG,CAAC,SAAS,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;QAGlD,IAAI,eAAe,GAAW,wCAAwC,CAAC;QACvE,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC;QACD,GAAG,CAAC,SAAS,CAAC,8BAA8B,EAAE,eAAe,CAAC,CAAC;QAG/D,IAAI,cAAc,GAAW,qCAAqC,CAAC;QACnE,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACZ,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACrC,CAAC;QACD,GAAG,CAAC,SAAS,CAAC,8BAA8B,EAAE,cAAc,CAAC,CAAC;QAI9D,GAAG,CAAC,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC,CAAC;QAG1D,IAAI,EAAE,CAAC;IACT,CAAC,CAAC;AACJ,CAAC;AA1Be,oBAAY,eA0B3B,CAAA","file":"cors.js","sourcesContent":["// Copyright 2016 Frank Lin (lin.xiaoe.f@gmail.com). All rights reserved.\n// Use of this source code is governed a license that can be found in the LICENSE file.\n\nimport * as express from 'express';\n\n/**\n * CORS middleware for 'Access-Control-Allow'.\n *\n * @param headers HTTP headers, deafult is 'X-Requested-With', 'content-type', 'Token'.\n * @param methods HTTP method string, can be one of 'GET', 'POST', 'OPTIONS', 'PUT', 'PATCH', 'DELETE', default is allow all.\n **/\nexport function corsAllowAll(headers?: string[], methods?: string[]): (req: express.Request, res: express.Response, next: express.NextFunction) => void {\n  return (req: express.Request, res: express.Response, next: express.NextFunction) => {\n    // Website you wish to allow to connect\n    res.setHeader('Access-Control-Allow-Origin', '*');\n\n    // Request methods you wish to allow\n    let allowMethodsStr: string = 'GET, POST, OPTIONS, PUT, PATCH, DELETE';\n    if (methods) {\n      allowMethodsStr = methods.join(',');\n    }\n    res.setHeader('Access-Control-Allow-Methods', allowMethodsStr);\n\n    // Request headers you wish to allow\n    let allowHeaderStr: string = 'X-Requested-With,content-type,Token';\n    if (headers) {\n      allowHeaderStr = headers.join(',');\n    }\n    res.setHeader('Access-Control-Allow-Headers', allowHeaderStr);\n\n    // Set to true if you need the website to include cookies in the requests sent\n    // to the API (e.g. in case you use sessions)\n    res.setHeader('Access-Control-Allow-Credentials', 'true');\n\n    // Pass to next layer of middleware\n    next();\n  };\n}\n"]}