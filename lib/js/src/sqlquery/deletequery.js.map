{"version":3,"sources":["../src/sqlquery/deletequery.ts"],"names":[],"mappings":";AAGA,6BAAyB,oBAAoB,CAAC,CAAA;AAQ9C;IAIE,IAAI,CAAC,KAAa;QAChB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,SAAS,CAAC,GAAa;QACrB,IAAI,KAAK,GAAW,uBAAU,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,KAAK,CAAC,GAAG,IAAW;QAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,KAAK;QACH,IAAI,GAAG,GAAW,eAAe,IAAI,CAAC,MAAM,EAAE,CAAC;QAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,GAAG,GAAG,GAAG,GAAG,UAAU,IAAI,CAAC,MAAM,EAAE,CAAC;QACtC,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;AACH,CAAC;AA7BY,mBAAW,cA6BvB,CAAA","file":"deletequery.js","sourcesContent":["// Copyright 2016 Frank Lin (lin.xiaoe.f@gmail.com). All rights reserved.\n// Use of this source code is governed a license that can be found in the LICENSE file.\n\nimport {sqlContext} from \"../util/sqlcontext\";\n\n/**\n * Delete query.\n *\n * Usage:\n *  let sql: string = new DeleteQuery().from('xx').where('a=c').build();\n */\nexport class DeleteQuery {\n  private table_: string;\n  private where_: string;\n\n  from(table: string): this {\n    this.table_ = table;\n    return this;\n  }\n\n  fromClass(cls: Function): this {\n    let table: string = sqlContext.findTableByClass(cls);\n    if (table) {\n      this.table_ = table;\n    }\n    return this;\n  }\n\n  where(...args: any[]): this {\n    this.where_ = args.join(' AND ');\n    return this;\n  }\n\n  build(): string {\n    let sql: string = `DELETE FROM ${this.table_}`;\n    if (this.where_) {\n      sql = `${sql} WHERE ${this.where_}`;\n    }\n    return sql;\n  }\n}"]}